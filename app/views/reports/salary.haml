= render "header"

%h3 #{params[:year]} 年薪資支出表

%p= link_to "匯出 CSV", salary_reports_path(params[:year], format: :csv), class: "btn btn-m btn-primary"

- if @report.any?
  %table.table
    %tr
      %th 姓名
      %th.hide 身份證字號
      %th.hide 戶籍地址
      - 1.upto(12) do |month|
        %th= "#{month} 月"
      %th 端午
      %th 中秋
      %th 年終

    - @report.each do |row|
      %tr
        %td= link_to row[:employee][:name], employee_path(row[:employee][:id])
        %td.hide= row[:employee][:id_number]
        %td.hide= row[:employee][:address]
        - 12.times do |month|
          = render "cell", cell: row[:income][month]
        %td= number_with_delimiter row[:festival_bonus][:dragonboat]
        %td= number_with_delimiter row[:festival_bonus][:midautumn]
        %td= number_with_delimiter row[:festival_bonus][:newyear]
